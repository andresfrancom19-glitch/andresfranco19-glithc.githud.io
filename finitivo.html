<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="napoliCali: Auténticas pizzas italianas en Cali, Colombia. Ordena ahora con Nequi o contraentrega.">
    <title>napoliCali - Pizzería en Cali</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        :root {
            --verde: #009246;
            --blanco: #FFFFFF;
            --rojo: #CE2B37;
        }
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, var(--verde) 33%, var(--blanco) 33% 66%, var(--rojo) 66%);
            color: #333;
        }
        header {
            background: rgba(255, 255, 255, 0.9);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 2rem; /* Reducido para móvil */
            color: var(--rojo);
        }
        nav a {
            color: var(--verde);
            font-weight: bold;
        }
        nav a:hover {
            color: var(--rojo);
        }
        .hero {
            background: url('https://source.unsplash.com/random/1920x1080/?italian-pizza') no-repeat center/cover;
            height: 40vh; /* Reducido para móvil */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0,146,70,0.5) 33%, rgba(255,255,255,0.5) 33% 66%, rgba(206,43,55,0.5) 66%);
        }
        .hero h1 {
            font-size: 2.5rem; /* Ajustado para móvil */
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .section {
            padding: 40px 0; /* Reducido padding para móvil */
            animation: fadeIn 1s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pizza-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .pizza-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        #cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--verde);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 1000; /* Asegurar visibilidad */
        }
        #cart-items {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: white;
            border: 1px solid var(--rojo);
            padding: 20px;
            max-width: 90vw; /* Ajustado para móvil */
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        footer {
            background: var(--blanco);
            color: #333;
            padding: 20px;
            text-align: center;
        }
        .payment-methods {
            font-weight: bold;
            color: var(--rojo);
        }
        .qr-code {
            max-width: 200px;
            margin: 10px auto;
        }
        img {
            max-width: 100%;
            height: auto;
            loading: lazy; /* Optimización de carga */
        }
        /* Media queries para mejoras móviles */
        @media (max-width: 768px) {
            body {
                background: linear-gradient(to bottom, var(--verde) 33%, var(--blanco) 33% 66%, var(--rojo) 66%); /* Cambiar a horizontal para mejor visual en móvil */
            }
            header .container {
                flex-direction: column;
                align-items: flex-start;
            }
            nav ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
            }
            .hero h1 {
                font-size: 2rem;
            }
            .logo {
                font-size: 1.8rem;
            }
            .section {
                padding: 30px 0;
            }
            #cart {
                bottom: 10px;
                right: 10px;
                padding: 8px 16px;
            }
            #cart-items {
                max-width: 95vw;
                right: 10px;
                bottom: 60px;
            }
            .card-img-top {
                height: 150px; /* Ajustar altura de imágenes para móvil */
                object-fit: cover;
            }
            iframe {
                height: 300px; /* Reducir mapa en móvil */
            }
        }
    </style>
</head>
<body>

    <header class="py-3">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="logo m-0">napoliCali</h1>
            <nav>
                <ul class="list-inline m-0">
                    <li class="list-inline-item mx-3"><a href="#inicio">Inicio</a></li>
                    <li class="list-inline-item mx-3"><a href="#menu">Menú</a></li>
                    <li class="list-inline-item mx-3"><a href="#ubicacion">Ubicación</a></li>
                    <li class="list-inline-item mx-3"><a href="#contacto">Contacto</a></li>
                </ul>
            </nav>
            <a href="tel:3187265380" class="btn btn-outline-success">Llama: 3187265380</a>
        </div>
    </header>

    <section id="inicio" class="hero">
        <h1>¡Bienvenido a napoliCali!<br>Pizzas Auténticas en Cali</h1>
    </section>

    <section id="menu" class="section bg-light">
        <div class="container">
            <h2 class="text-center mb-5" style="color: var(--verde);">Nuestro Menú</h2>
            <div class="row">
                <div class="col-md-3 col-6 mb-4"> <!-- Ajustado a col-6 para móvil (2 columnas) -->
                    <div class="card pizza-card">
                        <img src="https://www.allrecipes.com/thmb/v1Xi2wtebK1sZwSJitdV4MGKl1c=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/hawaiian-pizza-ddmfs-3x2-132-450eff04ad924d9a9eae98ca44e3f988.jpg" class="card-img-top" alt="Pizza Hawaina real" onerror="this.src='https://via.placeholder.com/300x200?text=Pizza+Hawaina';">
                        <div class="card-body">
                            <h5 class="card-title">Pizza Hawaina</h5>
                            <p class="card-text">Piña, jamón y queso mozzarella. Precio: $25.000 COP</p>
                            <button class="btn btn-primary add-to-cart" data-name="Pizza Hawaina" data-price="25000">Agregar al carrito</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-4">
                    <div class="card pizza-card">
                        <img src="https://www.jennycancook.com/wp-content/uploads/2013/02/PeppPizza_600.jpg" class="card-img-top" alt="Pizza Peperoni real" onerror="this.src='https://via.placeholder.com/300x200?text=Pizza+Peperoni';">
                        <div class="card-body">
                            <h5 class="card-title">Pizza Peperoni</h5>
                            <p class="card-text">Peperoni picante y queso mozzarella. Precio: $25.000 COP</p>
                            <button class="btn btn-primary add-to-cart" data-name="Pizza Peperoni" data-price="25000">Agregar al carrito</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-4">
                    <div class="card pizza-card">
                        <img src="https://media.istockphoto.com/id/1307659068/photo/homemade-spicy-jalapeno-pepperoni-pizza.jpg?s=612x612&w=0&k=20&c=PhIrOhdpcfOzue21rwUB2RydVQrSEmug009jhJWmv-8=" class="card-img-top" alt="Pizza Jalapeño real" onerror="this.src='https://via.placeholder.com/300x200?text=Pizza+Jalapeño';">
                        <div class="card-body">
                            <h5 class="card-title">Pizza Jalapeño</h5>
                            <p class="card-text">Jalapeños frescos, carne y queso. Precio: $25.000 COP</p>
                            <button class="btn btn-primary add-to-cart" data-name="Pizza Jalapeño" data-price="25000">Agregar al carrito</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-4">
                    <div class="card pizza-card">
                        <img src="https://cookingitalians.com/wp-content/uploads/2024/11/Margherita-Pizza.jpg" class="card-img-top" alt="Pizza Margarita real" onerror="this.src='https://via.placeholder.com/300x200?text=Pizza+Margarita';">
                        <div class="card-body">
                            <h5 class="card-title">Pizza Margarita</h5>
                            <p class="card-text">Tomate, mozzarella y albahaca fresca. Precio: $25.000 COP</p>
                            <button class="btn btn-primary add-to-cart" data-name="Pizza Margarita" data-price="25000">Agregar al carrito</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="pedidos" class="section">
        <div class="container">
            <h2 class="text-center mb-5" style="color: var(--rojo);">Haz tu Pedido</h2>
            <form id="order-form">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" required>
                </div>
                <div class="mb-3">
                    <label for="direccion" class="form-label">Dirección en Cali</label>
                    <input type="text" class="form-control" id="direccion" required>
                </div>
                <div class="mb-3">
                    <label for="telefono" class="form-label">Teléfono</label>
                    <input type="tel" class="form-control" id="telefono" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Método de Pago</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="payment" id="nequi" value="nequi" checked>
                        <label class="form-check-label" for="nequi">Nequi (pago digital)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="payment" id="contraentrega" value="contraentrega">
                        <label class="form-check-label" for="contraentrega">Contraentrega (efectivo al delivery)</label>
                    </div>
                </div>
                <button type="submit" class="btn btn-success">Enviar Pedido</button>
            </form>
        </div>
    </section>

    <section id="ubicacion" class="section bg-light">
        <div class="container">
            <h2 class="text-center mb-5" style="color: var(--verde);">Ubicación en Cali</h2>
            <p class="text-center">Estamos en Calle 5 #10-20, Cali, Colombia. ¡Ven a visitarnos o pide delivery!</p>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3976.057!2d-76.531982!3d3.451647!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e30a6f0d3a7d3f7%3A0x4b3b8b8b8b8b8b8b!2sCali%2C%20Valle%20del%20Cauca%2C%20Colombia!5e0!3m2!1ses!2sus!4v1690000000000" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>

    <section id="contacto" class="section">
        <div class="container">
            <h2 class="text-center mb-5" style="color: var(--rojo);">Contacto</h2>
            <p class="text-center">Llámanos al <a href="tel:3187265380">3187265380</a> o envía un mensaje.</p>
            <form id="contact-form">
                <div class="mb-3">
                    <label for="contact-nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="contact-nombre" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="mb-3">
                    <label for="mensaje" class="form-label">Mensaje</label>
                    <textarea class="form-control" id="mensaje" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-success">Enviar</button>
            </form>
        </div>
    </section>

    <div id="cart">Carrito (0)</div>
    <div id="cart-items">
        <h5>Tu Carrito</h5>
        <ul id="cart-list" class="list-group"></ul>
        <p>Total: $<span id="total">0</span> COP</p>
        <button id="checkout" class="btn btn-primary">Proceder a Pago</button>
    </div>

    <!-- Modal para Checkout con Pagos -->
    <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="checkoutModalLabel">Checkout</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Total a pagar: $<span id="modal-total">0</span> COP</p>
                    <div class="mb-3">
                        <label class="form-label">Método de Pago</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="modal-payment" id="modal-nequi" value="nequi" checked>
                            <label class="form-check-label" for="modal-nequi">Nequi</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="modal-payment" id="modal-contraentrega" value="contraentrega">
                            <label class="form-check-label" for="modal-contraentrega">Contraentrega</label>
                        </div>
                    </div>
                    <div id="nequi-payment" style="display: block;">
                        <p>Paga con Nequi: Escanea este QR o usa el enlace.</p>
                        <img src="https://via.placeholder.com/200x200?text=QR+Nequi" alt="QR Nequi" class="qr-code d-block mx-auto">
                        <a href="nequi://pay?amount=total&reference=order123" class="btn btn-success mt-2" target="_blank">Pagar con Nequi (Demo)</a>
                        <p class="small">En producción, integra con EBANX API: POST /ws/direct con token y wallet code.</p>
                    </div>
                    <div id="contraentrega-payment" style="display: none;">
                        <p>Paga en efectivo al recibir tu pedido. ¡Gracias!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" id="confirm-payment" class="btn btn-primary">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 napoliCali. Todos los derechos reservados. Tel: 3187265380 | Síguenos en <a href="#">Instagram</a> | <a href="#">Facebook</a></p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script>
        try {
            let cart = [];
            const cartButton = document.getElementById('cart');
            const cartItems = document.getElementById('cart-items');
            const cartList = document.getElementById('cart-list');
            const totalSpan = document.getElementById('total');
            const checkoutModal = new bootstrap.Modal(document.getElementById('checkoutModal'));
            const modalTotal = document.getElementById('modal-total');
            const nequiDiv = document.getElementById('nequi-payment');
            const contraentregaDiv = document.getElementById('contraentrega-payment');
            const paymentRadios = document.querySelectorAll('input[name="modal-payment"]');

            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', () => {
                    const name = button.dataset.name;
                    const price = parseInt(button.dataset.price);
                    cart.push({ name, price });
                    updateCart();
                });
            });

            cartButton.addEventListener('click', () => {
                cartItems.style.display = cartItems.style.display === 'block' ? 'none' : 'block';
            });

            function updateCart() {
                cartList.innerHTML = '';
                let total = 0;
                cart.forEach((item, index) => {
                    total += item.price;
                    const li = document.createElement('li');
                    li.className = 'list-group-item d-flex justify-content-between';
                    li.innerHTML = `${item.name} - $${item.price} COP <button class="btn btn-sm btn-danger remove" data-index="${index}">Eliminar</button>`;
                    cartList.appendChild(li);
                });
                totalSpan.textContent = total;
                cartButton.textContent = `Carrito (${cart.length})`;

                document.querySelectorAll('.remove').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const index = parseInt(btn.dataset.index);
                        cart.splice(index, 1);
                        updateCart();
                    });
                });
            }

            document.getElementById('checkout').addEventListener('click', () => {
                if (cart.length === 0) {
                    alert('Agrega items al carrito primero.');
                    return;
                }
                modalTotal.textContent = totalSpan.textContent;
                cartItems.style.display = 'none';
                checkoutModal.show();
            });

            paymentRadios.forEach(radio => {
                radio.addEventListener('change', () => {
                    if (radio.value === 'nequi') {
                        nequiDiv.style.display = 'block';
                        contraentregaDiv.style.display = 'none';
                    } else {
                        nequiDiv.style.display = 'none';
                        contraentregaDiv.style.display = 'block';
                    }
                });
            });

            document.getElementById('confirm-payment').addEventListener('click', () => {
                const selectedPayment = document.querySelector('input[name="modal-payment"]:checked').value;
                if (selectedPayment === 'nequi') {
                    alert('Redirigiendo a Nequi para pago de $' + modalTotal.textContent + ' COP. En real: POST a /ws/direct con integration_key.');
                } else {
                    alert('Pedido confirmado con contraentrega. Paga al delivery $' + modalTotal.textContent + ' COP.');
                }
                checkoutModal.hide();
                cart = [];
                updateCart();
            });

            document.getElementById('order-form').addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Pedido enviado. ¡Gracias!');
            });

            document.getElementById('contact-form').addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Mensaje enviado. ¡Gracias!');
            });

            const sections = document.querySelectorAll('.section');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeIn 1s ease-in';
                    }
                });
            });
            sections.forEach(section => observer.observe(section));
        } catch (error) {
            console.error('Error en el script:', error);
            alert('Hubo un error en el JS. Prueba recargando la página.');
        }
    </script>
</body>
</html>